apply plugin: 'java'
apply plugin: 'groovy'
apply plugin: 'eclipse'

sourceCompatibility = '1.7'
version = '1.0'

configurations {
    cucumberRuntime {
        extendsFrom testRuntime
    }
}

repositories { mavenCentral() }

dependencies {
    compile "org.codehaus.groovy:groovy-all:2.1.6"
    cucumberRuntime files("${jar.archivePath}")
    testCompile "info.cukes:cucumber-groovy:1.1.3"
    testCompile "info.cukes:cucumber-junit:1.1.3"
    testCompile "org.gebish:geb-core:0.9.0"
    testCompile "org.seleniumhq.selenium:selenium-firefox-driver:2.33.0"
}

task cucumber() {
    dependsOn assemble, compileTestGroovy

    doLast {
        javaexec {
            main = "cucumber.api.cli.Main"
            classpath = configurations.cucumberRuntime
            args = ["--glue", "src/test/groovy", "src/test/resources"]
        }
    }
}
